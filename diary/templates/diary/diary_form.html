<!DOCTYPE html>
{% extends 'diary/base.html' %}

{% block main_area %}
<body>
    <div class="container py-1">
        <h1 class="my-4">Create New Diary</h1>
        <h6>작성일자 : <span id="current_date"></span></h6>
        <hr>

        <form method="POST" enctype="multipart/form-data" action="">
            {% csrf_token %}

            <table>
                {{ form.as_table }}
            </table>
            <br>
            <input type="submit" class="btn btn-primary" value="일기 작성">
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>

<script>
   window.addEventListener('DOMContentLoaded', function() {
      var currentDateElement = document.getElementById('current_date');
      var currentDate = new Date().toLocaleDateString();
      currentDateElement.textContent = currentDate;

      var uploadButton = document.getElementById('upload_button');
      var fileInput = document.getElementById('file_input');
      var fileNamesContainer = document.getElementById('file_names');

      uploadButton.addEventListener('click', function() {
         fileInput.click();
      });

      fileInput.addEventListener('change', function() {
         fileNamesContainer.innerHTML = '';
         for (var i = 0; i < fileInput.files.length; i++) {
            var file = fileInput.files[i];
            var fileName = document.createElement('p');
            fileName.textContent = file.name;
            fileNamesContainer.appendChild(fileName);
         }
      });
   });
</script>
<!--</html>-->
{% endblock %}