<!DOCTYPE html>
{% extends 'diary/base.html' %}
<!--<html lang="ko">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>일기작성</title>-->
<!--    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">-->
<!--</head>-->
{% block main_area %}
<body>
    <div class="container py-1">
        <h1 class="my-4">Create New Diary</h1>
        <hr>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="diary_title" class="form-label">제목:</label>
                <input type="text" class="form-control" id="diary_title" name="diary_title">
            </div>
            <div class="mb-3">
                <p>작성일: <span id="current_date"></span></p>
            </div>
            <div class="mb-3">
                <textarea name="diary_content" rows="10" cols="50" class="form-control"></textarea>
            </div>
            <div class="mb-3">
                <input type="file" id="file_input" name="file_input" accept="image/*" multiple style="display: none;">
                <button type="button" id="upload_button" class="btn btn-secondary">이미지 파일 첨부</button>
            </div>
            <div id="file_names"></div>
            <hr>
            <input type="submit" class="btn btn-primary" value="저장하기">
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>

<script>
   window.addEventListener('DOMContentLoaded', function() {
      var currentDateElement = document.getElementById('current_date');
      var currentDate = new Date().toLocaleDateString();
      currentDateElement.textContent = currentDate;

      var uploadButton = document.getElementById('upload_button');
      var fileInput = document.getElementById('file_input');
      var fileNamesContainer = document.getElementById('file_names');

      uploadButton.addEventListener('click', function() {
         fileInput.click();
      });

      fileInput.addEventListener('change', function() {
         fileNamesContainer.innerHTML = '';
         for (var i = 0; i < fileInput.files.length; i++) {
            var file = fileInput.files[i];
            var fileName = document.createElement('p');
            fileName.textContent = file.name;
            fileNamesContainer.appendChild(fileName);
         }
      });
   });
</script>
<!--</html>-->
{% endblock %}